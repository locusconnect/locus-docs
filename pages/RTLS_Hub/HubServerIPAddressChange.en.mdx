# Changing the RTLS Hub Server IP Address

## Overview

This guide provides step-by-step instructions for changing the IP address of your RTLS Hub server. This procedure may be necessary when:

* Moving the server to a different network segment
* Reconfiguring your network infrastructure
* Resolving IP address conflicts
* Implementing network security changes

## Prerequisites

Before changing the IP address, ensure you have:

* Administrator access to the RTLS Hub server
* A new valid IP address for the server
* Network configuration details (subnet mask, gateway, DNS)
* A maintenance window when the system can be offline
* A current backup of the RTLS Hub configuration

## Pre-Change Checklist

Complete these tasks before making any changes:

- [ ] Notify all system users of the planned downtime
- [ ] Create a full system backup
- [ ] Document the current IP configuration
- [ ] Verify the new IP address is available and valid
- [ ] Schedule the change during minimal operational impact
- [ ] Have a rollback plan in case of issues

## Procedure for Windows Servers

### Step 1: Stop RTLS Services

1. Open Windows Services (services.msc)
2. Locate and stop the following services in this order:
   * Locus RTLS Hub Web Service
   * Locus RTLS Engine Service
   * Locus Database Service (if using local database)
3. Verify all services are in "Stopped" state

### Step 2: Change Server IP Address

1. Open Network Connections (Windows Settings or Control Panel)
2. Right-click on the network adapter and select "Properties"
3. Select "Internet Protocol Version 4 (TCP/IPv4)" and click "Properties"
4. Change the IP address, subnet mask, default gateway, and DNS servers
5. Click "OK" to apply the changes
6. Verify connectivity with basic network tools (ping, tracert)

### Step 3: Update RTLS Hub Configuration

1. Navigate to the RTLS Hub installation directory (typically C:\Program Files\Locus\RTLS Hub)
2. Open the `config` folder
3. Edit the `server.config` file using a text editor (run as administrator)
4. Locate the `<network>` section and update the following:
   * `<serverAddress>` - Enter the new IP address
   * `<apiEndpoint>` - Update any IP references
   * `<webInterface>` - Update any IP references
5. Save the file

### Step 4: Update Database Connection (if using external database)

1. Open the `database.config` file
2. Update any server IP references in the connection string
3. Save the file

### Step 5: Restart Services

1. Open Windows Services (services.msc)
2. Start the services in the following order:
   * Locus Database Service (if applicable)
   * Locus RTLS Engine Service
   * Locus RTLS Hub Web Service
3. Verify all services start successfully

## Procedure for Linux Servers

### Step 1: Stop RTLS Services

```bash
sudo systemctl stop locus-rtls-web
sudo systemctl stop locus-rtls-engine
sudo systemctl stop locus-database    # if using local database
```

### Step 2: Change Server IP Address

For Ubuntu/Debian systems:

1. Edit the network configuration:
   ```bash
   sudo nano /etc/netplan/01-netcfg.yaml
   ```

2. Update the IP configuration:
   ```yaml
   network:
     version: 2
     ethernets:
       ens192:    # Your interface name may differ
         addresses: [192.168.1.100/24]    # New IP/netmask
         gateway4: 192.168.1.1             # Gateway
         nameservers:
           addresses: [8.8.8.8, 8.8.4.4]   # DNS servers
   ```

3. Apply the changes:
   ```bash
   sudo netplan apply
   ```

### Step 3: Update RTLS Hub Configuration

1. Navigate to the configuration directory:
   ```bash
   cd /opt/locus/rtlshub/config/
   ```

2. Edit the server configuration:
   ```bash
   sudo nano server.config
   ```

3. Update the IP address references
4. Save the file

### Step 4: Update Database Connection (if needed)

1. Edit the database configuration:
   ```bash
   sudo nano database.config
   ```

2. Update any IP address references
3. Save the file

### Step 5: Restart Services

```bash
sudo systemctl start locus-database    # if applicable
sudo systemctl start locus-rtls-engine
sudo systemctl start locus-rtls-web
```

## Post-Change Verification

After changing the IP address, verify the system is working correctly:

1. Check that all services are running
2. Access the web interface using the new IP address
3. Verify that real-time positioning data is being received
4. Check for any errors in the system logs
5. Test all integrated systems and applications

## Troubleshooting

If issues occur after changing the IP address:

### Common Problems and Solutions

| Problem | Solution |
|---------|----------|
| Services fail to start | Check the service logs for specific errors |
| Web interface not accessible | Verify firewall settings and network connectivity |
| Database connection errors | Check database connection string and network path |
| API connectivity issues | Update API endpoints in client applications |
| Anchor communication failures | Verify anchor network settings and connectivity |

### System Logs

Check the following log files for error messages:

* Windows: `C:\Program Files\Locus\RTLS Hub\Logs\`
* Linux: `/opt/locus/rtlshub/logs/`

## Updating Client Applications

After changing the server IP address, update any client applications or systems that connect to the RTLS Hub:

1. Update API endpoint references
2. Update web interface bookmarks
3. Update any hardcoded IP addresses in scripts or applications
4. Update firewall rules if necessary

## Rollback Procedure

If you need to revert to the previous IP address:

1. Stop all RTLS Hub services
2. Change the IP address back to the original value
3. Restore the original configuration files from backup
4. Restart the services
5. Verify system operation
